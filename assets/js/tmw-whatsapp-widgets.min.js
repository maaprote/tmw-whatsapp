"use strict";!function(m){var e=window||{},e={$tmw_whatsapp_widget_button:m(".tmw-whatsapp-button"),initialize:function(t){return 0<t.length&&(this.$tmw_whatsapp_widget_button=t.find(".tmw-whatsapp-button")),this.build().events(),(0<window.location.search.indexOf("vc_action=vc_inline")||window.location.search.indexOf("vc_editable=true"))&&this.wpBakeryFrontEndEditorEvents(),this},build:function(){return this.$tmw_whatsapp_widget_button.each(function(){var t,e,n,a,i,o=m(this),s=JSON.parse(atob(m(this).data("availability"))),d=(new Date).toLocaleString("en-us",{weekday:"long",timezone:m(this).data("default-timezone")}).toLowerCase(),w=!1,l=!1;"no"==s[d].available?o.addClass("tmw-attendant-is-offline").attr("disabled",!0):"yes"==s[d].available&&(""!=s[d].start&&""!=s[d].end?(a=""==s[d].timezone||s[d].timezone==m(this).data("default-timezone")?m(this).data("default-timezone"):s[d].timezone,t=moment((new Date).getFullYear()+"-"+("0"+((new Date).getMonth()+1)).slice(-2)+"-"+("0"+(new Date).getDate()).slice(-2)+"T"+s[d].start+":00").tz(a).format(),e=moment((new Date).getFullYear()+"-"+("0"+((new Date).getMonth()+1)).slice(-2)+"-"+("0"+(new Date).getDate()).slice(-2)+"T"+s[d].end+":00").tz(a).format(),n=moment((new Date).getFullYear()+"-"+("0"+((new Date).getMonth()+1)).slice(-2)+"-"+("0"+(new Date).getDate()).slice(-2)+"T"+s[d].interval_start+":00").tz(a).format(),i=moment((new Date).getFullYear()+"-"+("0"+((new Date).getMonth()+1)).slice(-2)+"-"+("0"+(new Date).getDate()).slice(-2)+"T"+s[d].interval_end+":00").tz(a).format(),a=moment().tz(a).format(),i=moment(a).isBetween(n,i)):l=!0),(w=!i&&(!!l||moment(a).isBetween(t,e)))?(o.removeClass("attendant-is-offline").addClass("tmw-attendant-is-online").attr("disabled",!1),o.find(".tmw-whatsapp-elementor-title-status").addClass("tmw-whatsapp-elementor-title-status-online").text(tmwc_data.i18n.attendant_online_text),o.find(".tmw-whatsapp-elementor-info-offline-message").addClass("tmw-d-none")):i?(o.removeClass("attendant-is-online").addClass("tmw-attendant-is-offline").attr("disabled",!0),o.find(".tmw-whatsapp-elementor-title-status").addClass("tmw-whatsapp-elementor-title-status-offline").text(tmwc_data.i18n.attendant_offline_text),o.find(".tmw-whatsapp-elementor-info-offline-message:not(.is-interval)").addClass("tmw-d-none")):"no"!=s[d].available&&w?(o.removeClass("attendant-is-offline").addClass("tmw-attendant-is-online").attr("disabled",!1),o.find(".tmw-whatsapp-elementor-title-status").addClass("tmw-whatsapp-elementor-title-status-online").text(tmwc_data.i18n.attendant_online_text)):(o.removeClass("attendant-is-online").addClass("tmw-attendant-is-offline").attr("disabled",!0),o.find(".tmw-whatsapp-elementor-title-status").addClass("tmw-whatsapp-elementor-title-status-offline").text(tmwc_data.i18n.attendant_offline_text),o.find(".tmw-whatsapp-elementor-info-offline-message.is-interval").addClass("tmw-d-none"))}),this},events:function(){var n=this;return m(document).on("click",".tmw-whatsapp-button",function(t){var e;t.preventDefault(),0<=window.location.search.indexOf("elementor-preview")||m(this).hasClass("tmw-attendant-is-offline")||(e=m(this).data("phone-number"),t=m(this).data("start-message"),n.openWhatsappWebChat(e,t))}),n.$tmw_whatsapp_widget_button.on("animationend",function(){m(this).trigger("tmw.whatsapp.button.loaded")}),this},wpBakeryFrontEndEditorEvents:function(){var t=this;return m(document).ready(function(){m("#vc_inline-frame").on("load",function(){t.$tmw_whatsapp_widget_button.on("tmw.whatsapp.button.loaded",function(){vc.events.on("shortcodes:tmw_whatsapp_button:add shortcodes:tmw_whatsapp_button:clone",function(t){setTimeout(function(){e.initialize(vc.$frame[0].contentWindow.jQuery('.vc_element[data-model-id="'+t.id+'"]').find(".tmw-whatsapp-wpbakery-widget"))},1e3)})})})}),this},openWhatsappWebChat:function(t,e){return 0<t.toString().indexOf("chat.whatsapp.com")?window.open(t,"_blank"):e?window.open("https://wa.me/"+t+"/?text="+e,"_blank"):window.open("https://wa.me/"+t,"_blank"),this}};m(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/tmwhatsappwidget.default",function(t){e.initialize(t)})}),m("#vc_inline-frame").get(0)&&m("#vc_inline-frame").on("load",function(){setTimeout(function(){vc.$frame[0].contentWindow.jQuery(".tmw-whatsapp-wpbakery-widget")&&(vc.$frame[0].contentWindow.jQuery(".tmw-whatsapp-wpbakery-widget").each(function(){e.initialize(vc.$frame[0].contentWindow.jQuery(".tmw-whatsapp-wpbakery-widget")),jQuery(this).find("p").each(function(){""==jQuery(this).text()&&jQuery(this).remove()})}),vc.events.on("shortcodes:tmw_whatsapp_button:add shortcodeView:updated shortcodes:tmw_whatsapp_button:clone",function(t){setTimeout(function(){"tmw_whatsapp_button"==t.attributes.shortcode&&e.initialize(vc.$frame[0].contentWindow.jQuery('.vc_element[data-model-id="'+t.id+'"]').find(".tmw-whatsapp-wpbakery-widget"))},3e3)}),vc.events.on("shortcodes:add shortcodeView:updated shortcodes:clone",function(t){setTimeout(function(){0<t.attributes.params.content.indexOf("tmw_whatsapp_button_wp")&&e.initialize(vc.$frame[0].contentWindow.jQuery('.vc_element[data-model-id="'+t.id+'"]').find(".tmw-whatsapp-wpbakery-widget"))},3e3)}))},0)}),e.initialize(!1)}(jQuery);